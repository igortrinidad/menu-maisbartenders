{"version":3,"sources":["webpack:///static/js/3.ef17ebb3b6b14d462da9.js","webpack:///./src/modules/landing/auth/components/login.vue","webpack:///login.vue","webpack:///./src/modules/landing/auth/components/login.vue?c372","webpack:///./src/modules/landing/auth/components/login.vue?eb4e","webpack:///./src/modules/landing/auth/components/login.vue?4d5a"],"names":["webpackJsonp","224","module","exports","__webpack_require__","Component","523","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","name","data","interactions","showEmailLogin","email","password","redirect","computed","i","mounted","window","cordova","openFB","init","appId","tokenStore","localStorage","methods","login","that","this","setLoading","is_loading","message","$auth","url","fetchUser","rememberMe","handleRedirect","success","response","authSetToken","access_token","authSetUser","user","successNotify","error","_error","errorNotify","events","getItem","clear","setItem","cookies","facebookLogin","status","statusChangeCallback","alert","scope","FB","getUserInfo","authResponse","accessToken","api","path","params","fields","photo_url","id","role","socialLogin","errorHandler","$http","post","then","getUserDrinkLikes","$router","push","catch","$route","query","redirect_back","get","setUserDrinkLikes","likes","console","log","527","version","sources","names","mappings","file","sourcesContent","sourceRoot","533","content","locals","544","render","_vm","_h","$createElement","_c","_self","ready","attrs","staticClass","_m","_v","on","click","$event","keydown","_k","keyCode","directives","rawName","expression","type","placeholder","domProps","input","target","composing","disabled","preventDefault","_e","staticRenderFns"],"mappings":"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","file":"static/js/3.ef17ebb3b6b14d462da9.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 224:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(533)\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(523),\n  /* template */\n  __webpack_require__(544),\n  /* scopeId */\n  \"data-v-6c525212\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 523:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_Event_js__ = __webpack_require__(23);\n\n\n\n\n\n\nvar Swiper = __webpack_require__(16);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'login',\n    data: function data() {\n        return {\n            interactions: {\n                showEmailLogin: false\n            },\n            email: null,\n            password: null,\n            redirect: null\n        };\n    },\n\n    computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* mapGetters */])(['currentUser', 'isLogged'])),\n    mounted: function mounted() {\n\n        if (window.cordova) {\n\n            openFB.init({ appId: '262783620860879', tokenStore: localStorage });\n        }\n    },\n\n    methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapActions */])(['authSetToken', 'authSetUser', 'setLoading', 'setUserDrinkLikes']), {\n        login: function login() {\n            var that = this;\n            that.setLoading({ is_loading: true, message: '' });\n\n            this.$auth.login({\n                url: 'guest/auth/login',\n                fetchUser: true,\n                data: {\n                    email: this.email,\n                    password: this.password\n                },\n                rememberMe: this.rememberMe,\n                redirect: this.handleRedirect(),\n                success: function success(response) {\n                    this.authSetToken(response.data.access_token);\n                    this.authSetUser(response.data.user);\n                    that.setLoading({ is_loading: false, message: '' });\n                    successNotify('', 'Login efetuado com sucesso.');\n                },\n                error: function error(_error) {\n                    that.setLoading({ is_loading: false, message: '' });\n                    errorNotify('Ops!', 'Login ou senha inválidos. Dica: Tente pelo Facebook.');\n\n                    var events = localStorage.getItem('events');\n                    localStorage.clear();\n                    localStorage.setItem('events', events);\n\n                    if (window.cordova) {\n                        window.cookies.clear();\n                    }\n                }\n            });\n        },\n        facebookLogin: function facebookLogin() {\n            var that = this;\n\n            that.setLoading({ is_loading: true, message: '' });\n\n            if (window.cordova) {\n                openFB.login(function (response) {\n                    if (response.status === 'connected') {\n                        that.statusChangeCallback(response);\n                    } else {\n                        that.setLoading({ is_loading: false, message: '' });\n                        alert('Facebook login failed: ' + response.error);\n                        if (window.cordova) {\n                            window.cookies.clear();\n                        }\n                    }\n                }, { scope: 'public_profile,email,publish_actions' });\n            }\n\n            if (!window.cordova) {\n\n                FB.login(function (response) {\n                    that.statusChangeCallback(response);\n                }, { scope: 'public_profile,email,publish_actions' });\n            }\n        },\n        statusChangeCallback: function statusChangeCallback(response) {\n            var that = this;\n\n            if (response.status === 'connected') {\n                that.getUserInfo(response.authResponse.accessToken);\n            } else {\n                errorNotify('', 'É necessário fazer login para continuar.');\n                that.setLoading({ is_loading: false, message: '' });\n            }\n        },\n        getUserInfo: function getUserInfo(accessToken) {\n            var that = this;\n            if (window.cordova) {\n                openFB.api({\n                    path: '/v2.8/me',\n                    params: { \"access_token\": accessToken, \"fields\": \"id,name,first_name,last_name,email\" },\n                    success: function success(response) {\n\n                        response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                        response.access_token = accessToken;\n                        response.role = 'guest';\n\n                        that.socialLogin(response);\n\n                        that.setLoading({ is_loading: false, message: '' });\n                    },\n                    error: that.errorHandler\n                });\n            }\n\n            if (!window.cordova) {\n                FB.api('/me', { fields: 'name,first_name, last_name, email' }, function (response) {\n                    response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                    response.access_token = accessToken;\n                    response.role = 'guest';\n\n                    that.socialLogin(response);\n                });\n            }\n        },\n        socialLogin: function socialLogin(response) {\n            var that = this;\n            localStorage.setItem('provider', 'facebook');\n\n            that.setLoading({ is_loading: true, message: '' });\n\n            that.$http.post('/auth/social', response).then(function (response) {\n\n                that.authSetToken(response.data.access_token);\n                that.authSetUser(response.data.user);\n\n                that.setLoading({ is_loading: false, message: '' });\n\n                successNotify('', 'Login efetuado com sucesso.');\n\n                that.getUserDrinkLikes();\n\n                that.$router.push(that.handleRedirect());\n            }).catch(function (error) {\n                errorNotify('Ops!', 'Erro ao efetuar login.');\n                that.setLoading({ is_loading: false, message: '' });\n\n                var events = localStorage.getItem('events');\n                localStorage.clear();\n                localStorage.setItem('events', events);\n\n                if (window.cordova) {\n                    window.cookies.clear();\n                }\n            });\n        },\n        handleRedirect: function handleRedirect() {\n            var that = this;\n            var redirect_to = void 0;\n\n            if (that.$route.query.redirect_back) {\n                redirect_to = that.$route.query.redirect_back;\n            } else {\n                redirect_to = that.$route.query.redirect;\n            }\n\n            return redirect_to ? redirect_to : '/';\n        },\n        errorHandler: function errorHandler(error) {\n            that.setLoading({ is_loading: false, message: '' });\n            errorNotify('', error.message);\n\n            var events = localStorage.getItem('events');\n            localStorage.clear();\n            localStorage.setItem('events', events);\n\n            if (window.cordova) {\n                window.cookies.clear();\n            }\n        },\n        getUserDrinkLikes: function getUserDrinkLikes() {\n            var that = this;\n\n            that.$http.get('/guest/drinkLikes').then(function (response) {\n\n                that.setUserDrinkLikes(response.data.likes);\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n    })\n});\n\n/***/ }),\n\n/***/ 527:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(514)();\n// imports\n\n\n// module\nexports.push([module.i, \".text-selected[data-v-6c525212]{background-color:#fed136;font-size:22px}#contact[data-v-6c525212]{background-color:#f7f7f7}.btn[data-v-6c525212]:active{-webkit-transform:scale(.99);transform:scale(.99)}\", \"\", {\"version\":3,\"sources\":[\"/Users/igortrindade/Code/menu-maisbartenders/src/modules/landing/auth/components/login.vue\"],\"names\":[],\"mappings\":\"AACA,gCACI,yBAA0B,AAC1B,cAAgB,CACnB,AACD,0BACI,wBAA0B,CAC7B,AACD,6BACI,6BAA+B,AACvB,oBAAuB,CAClC\",\"file\":\"login.vue\",\"sourcesContent\":[\"\\n.text-selected[data-v-6c525212]{\\n    background-color: #FED136;\\n    font-size: 22px;\\n}\\n#contact[data-v-6c525212]{\\n    background-color: #F7F7F7;\\n}\\n.btn[data-v-6c525212]:active{\\n    -webkit-transform: scale(0.99);\\n            transform: scale(0.99);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 533:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(527);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(515)(\"b2a7f3d8\", content, true);\n\n/***/ }),\n\n/***/ 544:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [(_vm.$auth.ready()) ? _c('section', {\n    attrs: {\n      \"id\": \"login\"\n    }\n  }, [_c('div', {\n    staticClass: \"container\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block facebook\",\n    on: {\n      \"click\": function($event) {\n        _vm.facebookLogin()\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-facebook fa-lg button-icon\"\n  }), _vm._v(\" Entrar com Facebook\\n                     \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block\",\n    on: {\n      \"click\": function($event) {\n        _vm.interactions.showEmailLogin = true\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-email fa-lg button-icon\"\n  }), _vm._v(\" Login com Email\\n                     \")])])])]), _vm._v(\" \"), (_vm.interactions.showEmailLogin) ? _c('div', {\n    staticClass: \"row m-t-20\",\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.login($event)\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Email\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.email),\n      expression: \"email\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"email\",\n      \"placeholder\": \"Informe seu e-mail\"\n    },\n    domProps: {\n      \"value\": (_vm.email)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.email = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Senha\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.password),\n      expression: \"password\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"Informe sua senha\"\n    },\n    domProps: {\n      \"value\": (_vm.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.password = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-xl btn-primary\",\n    attrs: {\n      \"disabled\": !_vm.email || !_vm.password\n    },\n    on: {\n      \"click\": function($event) {\n        $event.preventDefault();\n        _vm.login($event)\n      }\n    }\n  }, [_vm._v(\"Login\")])])])]) : _vm._e()])]) : _vm._e()])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"row m-b-30\"\n  }, [_c('div', {\n    staticClass: \"col-lg-12\"\n  }, [_c('h2', {\n    staticClass: \"section-heading\"\n  }, [_vm._v(\"Login\")]), _vm._v(\" \"), _c('h4', {\n    staticClass: \"text-muted m-t-30\"\n  }, [_vm._v(\"Salve e compartilhe com os amigos seus drinks preferidos.\")])])])\n}]}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.ef17ebb3b6b14d462da9.js","\n/* styles */\nrequire(\"!!../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-6c525212\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n\nvar Component = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"),\n  /* template */\n  require(\"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c525212\\\"}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"),\n  /* scopeId */\n  \"data-v-6c525212\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/landing/auth/components/login.vue\n// module id = 224\n// module chunks = 3","<template>\n   <div>\n\n    <section id=\"login\" v-if=\"$auth.ready()\">\n        <div class=\"container\">\n            <div class=\"row m-b-30\">\n                <div class=\"col-lg-12\">\n                    <h2 class=\"section-heading\">Login</h2>\n                    <h4 class=\"text-muted m-t-30\">Salve e compartilhe com os amigos seus drinks preferidos.</h4>\n                </div>\n            </div>\n\n            <div class=\"row\">\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <button class=\"btn btn-info btn-block facebook\" @click=\"facebookLogin()\">\n                            <i class=\"fa fa-facebook fa-lg button-icon\"></i> Entrar com Facebook\n                        </button>\n                    </div>\n                </div>\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <button class=\"btn btn-info btn-block\" @click=\"interactions.showEmailLogin = true\">\n                            <i class=\"fa fa-email fa-lg button-icon\"></i> Login com Email\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"row m-t-20\" v-if=\"interactions.showEmailLogin\" @keydown.enter=\"login\">\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <label>Email</label>\n                        <input type=\"email\" class=\"form-control\" v-model=\"email\" placeholder=\"Informe seu e-mail\">\n                    </div>\n                </div>\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <label>Senha</label>\n                        <input class=\"form-control\" type=\"password\" v-model=\"password\" placeholder=\"Informe sua senha\">\n                    </div>\n                </div>\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <button class=\"btn btn-xl btn-primary\" @click.prevent=\"login\" :disabled=\"!email || !password\">Login</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </section>\n\n   </div>\n</template>\n\n<script>\n    import { mapGetters, mapActions } from 'vuex'\n    import eventObj from '@/models/Event.js'\n\n    var Swiper = require('swiper')\n\n    export default {\n        name: 'login',\n        data () {\n            return {\n                interactions: {\n                    showEmailLogin: false,\n                },\n                email: null,\n                password: null,\n                redirect: null\n            }\n        },\n        computed:{\n            // Map the getters from Vuex to this component.\n\n            ...mapGetters(['currentUser', 'isLogged']),\n\n        },\n        mounted(){\n\n            if(window.cordova){\n\n                openFB.init({appId: '262783620860879', tokenStore: localStorage});\n            }\n        },\n        methods: {\n            /**\n             * Map the actions from Vuex to this component.\n             */\n            ...mapActions(['authSetToken', 'authSetUser', 'setLoading', 'setUserDrinkLikes']),\n\n            login () {\n                var that = this\n                that.setLoading({is_loading: true, message: ''})\n\n                this.$auth.login({\n                    url:'guest/auth/login',\n                    fetchUser:true,\n                    data:{\n                        email: this.email,\n                        password: this.password,\n                    },\n                    rememberMe: this.rememberMe,\n                    redirect: this.handleRedirect(),\n                    success (response) {\n                        this.authSetToken(response.data.access_token) // this is a Vuex action\n                        this.authSetUser(response.data.user) // this is a Vuex action\n                        that.setLoading({is_loading: false, message: ''})\n                        successNotify('', 'Login efetuado com sucesso.')\n                    },\n                    error (error) {\n                        that.setLoading({is_loading: false, message: ''})\n                        errorNotify('Ops!', 'Login ou senha inválidos. Dica: Tente pelo Facebook.');\n\n                        var events = localStorage.getItem('events');\n                        localStorage.clear();\n                        localStorage.setItem('events', events);\n\n                        if(window.cordova){\n                            window.cookies.clear();   \n                        }\n                    }\n                })\n\n            },\n\n            /*\n            * FACEBOOK Methods\n             */\n            facebookLogin(){\n                let that = this\n\n                that.setLoading({is_loading: true, message: ''})\n\n                if(window.cordova){\n                    openFB.login(\n                        function(response) {\n                            if(response.status === 'connected') {\n                                that.statusChangeCallback(response)\n                            } else {\n                                that.setLoading({is_loading: false, message: ''})\n                                alert('Facebook login failed: ' + response.error);\n                                if(window.cordova){\n                                    window.cookies.clear();   \n                                }\n                            }\n                        }, {scope: 'public_profile,email,publish_actions'});\n                }\n\n               if(!window.cordova){\n                    \n                   FB.login(function(response) {\n                       that.statusChangeCallback(response)\n                   }, {scope: 'public_profile,email,publish_actions'});\n               }\n            },\n\n            statusChangeCallback(response) {\n                let that = this\n                \n                if (response.status === 'connected') {\n                    that.getUserInfo(response.authResponse.accessToken);\n                } else {\n                    errorNotify('', 'É necessário fazer login para continuar.')\n                    that.setLoading({is_loading: false, message: ''})\n                }\n            },\n\n            getUserInfo(accessToken) {\n                let that = this\n                if(window.cordova){\n                    openFB.api({\n                        path: '/v2.8/me',\n                        params: { \"access_token\": accessToken, \"fields\":\"id,name,first_name,last_name,email\" },\n                        success: function(response) {\n\n                            response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                            response.access_token = accessToken;\n                            response.role = 'guest';\n\n                            that.socialLogin(response)\n\n                            that.setLoading({is_loading: false, message: ''})\n                        },\n                        error: that.errorHandler\n                    })\n                }\n\n                if(!window.cordova){\n                    FB.api('/me', {fields: 'name,first_name, last_name, email' }, function(response) {\n                        response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                        response.access_token = accessToken;\n                        response.role = 'guest';\n\n                        that.socialLogin(response)\n                    });\n                }\n            },\n\n            socialLogin(response){\n                let that = this\n                localStorage.setItem('provider', 'facebook')\n\n                that.setLoading({is_loading: true, message: ''})\n\n                that.$http.post('/auth/social', response)\n                    .then(function (response) {\n\n                        that.authSetToken(response.data.access_token) // this is a Vuex action\n                        that.authSetUser(response.data.user) // this is a Vuex action\n\n                        that.setLoading({is_loading: false, message: ''})\n\n                        successNotify('', 'Login efetuado com sucesso.')\n\n                        that.getUserDrinkLikes()\n\n                        that.$router.push(that.handleRedirect())\n\n                    })\n                    .catch(function (error) {\n                        errorNotify('Ops!', 'Erro ao efetuar login.')\n                        that.setLoading({is_loading: false, message: ''})\n                        \n                        var events = localStorage.getItem('events');\n                        localStorage.clear();\n                        localStorage.setItem('events', events);\n\n                        if(window.cordova){\n                            window.cookies.clear();   \n                        }\n                    });\n            },\n\n            handleRedirect(){\n                let that = this\n                let redirect_to\n\n                if (that.$route.query.redirect_back) {\n                    redirect_to = that.$route.query.redirect_back\n                } else {\n                    redirect_to = that.$route.query.redirect\n                }\n\n                return redirect_to ? redirect_to : '/'\n            },\n\n            errorHandler(error) {\n                that.setLoading({is_loading: false, message: ''})\n                errorNotify('', error.message);\n                \n                var events = localStorage.getItem('events');\n                localStorage.clear();\n                localStorage.setItem('events', events);\n\n                if(window.cordova){\n                    window.cookies.clear();   \n                }\n            },\n\n            getUserDrinkLikes(){\n                let that = this\n\n                that.$http.get('/guest/drinkLikes')\n                    .then(function (response) {\n\n                        that.setUserDrinkLikes(response.data.likes)\n\n                    })\n                    .catch(function (error) {\n                        console.log(error)\n                    });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n    .text-selected{\n        background-color: #FED136;\n        font-size: 22px;\n    }\n\n    #contact{\n        background-color: #F7F7F7;\n    }\n\n    .btn:active{\n        transform: scale(0.99);\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// login.vue?4dfec8ec","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".text-selected[data-v-6c525212]{background-color:#fed136;font-size:22px}#contact[data-v-6c525212]{background-color:#f7f7f7}.btn[data-v-6c525212]:active{-webkit-transform:scale(.99);transform:scale(.99)}\", \"\", {\"version\":3,\"sources\":[\"/Users/igortrindade/Code/menu-maisbartenders/src/modules/landing/auth/components/login.vue\"],\"names\":[],\"mappings\":\"AACA,gCACI,yBAA0B,AAC1B,cAAgB,CACnB,AACD,0BACI,wBAA0B,CAC7B,AACD,6BACI,6BAA+B,AACvB,oBAAuB,CAClC\",\"file\":\"login.vue\",\"sourcesContent\":[\"\\n.text-selected[data-v-6c525212]{\\n    background-color: #FED136;\\n    font-size: 22px;\\n}\\n#contact[data-v-6c525212]{\\n    background-color: #F7F7F7;\\n}\\n.btn[data-v-6c525212]:active{\\n    -webkit-transform: scale(0.99);\\n            transform: scale(0.99);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-6c525212\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/landing/auth/components/login.vue\n// module id = 527\n// module chunks = 3","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-6c525212\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./login.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"b2a7f3d8\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-6c525212\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/landing/auth/components/login.vue\n// module id = 533\n// module chunks = 3","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [(_vm.$auth.ready()) ? _c('section', {\n    attrs: {\n      \"id\": \"login\"\n    }\n  }, [_c('div', {\n    staticClass: \"container\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block facebook\",\n    on: {\n      \"click\": function($event) {\n        _vm.facebookLogin()\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-facebook fa-lg button-icon\"\n  }), _vm._v(\" Entrar com Facebook\\n                     \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block\",\n    on: {\n      \"click\": function($event) {\n        _vm.interactions.showEmailLogin = true\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-email fa-lg button-icon\"\n  }), _vm._v(\" Login com Email\\n                     \")])])])]), _vm._v(\" \"), (_vm.interactions.showEmailLogin) ? _c('div', {\n    staticClass: \"row m-t-20\",\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.login($event)\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Email\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.email),\n      expression: \"email\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"email\",\n      \"placeholder\": \"Informe seu e-mail\"\n    },\n    domProps: {\n      \"value\": (_vm.email)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.email = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Senha\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.password),\n      expression: \"password\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"Informe sua senha\"\n    },\n    domProps: {\n      \"value\": (_vm.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.password = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-xl btn-primary\",\n    attrs: {\n      \"disabled\": !_vm.email || !_vm.password\n    },\n    on: {\n      \"click\": function($event) {\n        $event.preventDefault();\n        _vm.login($event)\n      }\n    }\n  }, [_vm._v(\"Login\")])])])]) : _vm._e()])]) : _vm._e()])\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"row m-b-30\"\n  }, [_c('div', {\n    staticClass: \"col-lg-12\"\n  }, [_c('h2', {\n    staticClass: \"section-heading\"\n  }, [_vm._v(\"Login\")]), _vm._v(\" \"), _c('h4', {\n    staticClass: \"text-muted m-t-30\"\n  }, [_vm._v(\"Salve e compartilhe com os amigos seus drinks preferidos.\")])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c525212\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/modules/landing/auth/components/login.vue\n// module id = 544\n// module chunks = 3"],"sourceRoot":""}