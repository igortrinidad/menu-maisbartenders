webpackJsonp([3],{234:function(e,t,o){o(548);var a=o(1)(o(538),o(559),"data-v-6c525212",null);e.exports=a.exports},538:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(2),s=o.n(a),n=o(3),i=(o(32),o(225)),r=o.n(i);o(21);t.default={name:"login",components:{mainHeader:r.a},data:function(){return{interactions:{showEmailLogin:!1},email:null,password:null,redirect:null}},computed:s()({},o.i(n.a)(["currentUser","isLogged"])),mounted:function(){window.cordova&&openFB.init({appId:"262783620860879",tokenStore:localStorage})},methods:s()({},o.i(n.c)(["authSetToken","authSetUser","setLoading","setUserDrinkLikes"]),{login:function(){var e=this;e.setLoading({is_loading:!0,message:""}),this.$auth.login({url:"guest/auth/login",fetchUser:!0,data:{email:this.email,password:this.password},rememberMe:this.rememberMe,redirect:this.handleRedirect(),success:function(t){this.authSetToken(t.data.access_token),this.authSetUser(t.data.user),e.setLoading({is_loading:!1,message:""}),successNotify("","Login efetuado com sucesso.")},error:function(t){e.setLoading({is_loading:!1,message:""}),errorNotify("Ops!","Login ou senha inválidos. Dica: Tente pelo Facebook.");var o=localStorage.getItem("events");localStorage.clear(),localStorage.setItem("events",o),window.cordova&&window.cookies.clear()}})},facebookLogin:function(){var e=this;e.setLoading({is_loading:!0,message:""}),window.cordova&&openFB.login(function(t){"connected"===t.status?e.statusChangeCallback(t):(e.setLoading({is_loading:!1,message:""}),alert("Facebook login failed: "+t.error),window.cordova&&window.cookies.clear())},{scope:"public_profile,email,publish_actions"}),window.cordova||FB.login(function(t){e.statusChangeCallback(t)},{scope:"public_profile,email,publish_actions"})},statusChangeCallback:function(e){var t=this;"connected"===e.status?t.getUserInfo(e.authResponse.accessToken):(errorNotify("","É necessário fazer login para continuar."),t.setLoading({is_loading:!1,message:""}))},getUserInfo:function(e){var t=this;window.cordova&&openFB.api({path:"/v2.8/me",params:{access_token:e,fields:"id,name,first_name,last_name,email"},success:function(o){o.photo_url="https://graph.facebook.com/"+o.id+"/picture?type=normal",o.access_token=e,o.role="guest",t.socialLogin(o),t.setLoading({is_loading:!1,message:""})},error:t.errorHandler}),window.cordova||FB.api("/me",{fields:"name,first_name, last_name, email"},function(o){o.photo_url="https://graph.facebook.com/"+o.id+"/picture?type=normal",o.access_token=e,o.role="guest",t.socialLogin(o)})},socialLogin:function(e){var t=this;localStorage.setItem("provider","facebook"),t.setLoading({is_loading:!0,message:""}),t.$http.post("/auth/social",e).then(function(e){t.authSetToken(e.data.access_token),t.authSetUser(e.data.user),t.setLoading({is_loading:!1,message:""}),successNotify("","Login efetuado com sucesso."),t.getUserDrinkLikes(),t.$router.push(t.handleRedirect())}).catch(function(e){errorNotify("Ops!","Erro ao efetuar login."),t.setLoading({is_loading:!1,message:""});var o=localStorage.getItem("events");localStorage.clear(),localStorage.setItem("events",o),window.cordova&&window.cookies.clear()})},handleRedirect:function(){var e=this;return(e.$route.query.redirect_back?e.$route.query.redirect_back:e.$route.query.redirect)||"/"},errorHandler:function(e){that.setLoading({is_loading:!1,message:""}),errorNotify("",e.message);var t=localStorage.getItem("events");localStorage.clear(),localStorage.setItem("events",t),window.cordova&&window.cookies.clear()},getUserDrinkLikes:function(){var e=this;e.$http.get("/guest/drinkLikes").then(function(t){e.setUserDrinkLikes(t.data.likes)}).catch(function(e){console.log(e)})}})}},542:function(e,t,o){t=e.exports=o(529)(),t.push([e.i,".text-selected[data-v-6c525212]{background-color:#fed136;font-size:22px}#contact[data-v-6c525212]{background-color:#f7f7f7}.btn[data-v-6c525212]:active{-webkit-transform:scale(.99);transform:scale(.99)}","",{version:3,sources:["/home/andre/we-planner/menu-maisbartenders/src/modules/landing/auth/components/login.vue"],names:[],mappings:"AACA,gCACI,yBAA0B,AAC1B,cAAgB,CACnB,AACD,0BACI,wBAA0B,CAC7B,AACD,6BACI,6BAA+B,AACvB,oBAAuB,CAClC",file:"login.vue",sourcesContent:["\n.text-selected[data-v-6c525212]{\n    background-color: #FED136;\n    font-size: 22px;\n}\n#contact[data-v-6c525212]{\n    background-color: #F7F7F7;\n}\n.btn[data-v-6c525212]:active{\n    -webkit-transform: scale(0.99);\n            transform: scale(0.99);\n}\n"],sourceRoot:""}])},548:function(e,t,o){var a=o(542);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o(530)("b2a7f3d8",a,!0)},559:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("main-header",{attrs:{title:"Login"}}),e._v(" "),e.$auth.ready()?o("section",{attrs:{id:"login"}},[o("div",{staticClass:"container"},[e._m(0),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-6 col-md-offset-3 col-xs-12"},[o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-info btn-block facebook",on:{click:function(t){e.facebookLogin()}}},[o("i",{staticClass:"fa fa-facebook fa-lg button-icon"}),e._v(" Entrar com Facebook\n                     ")])])]),e._v(" "),o("div",{staticClass:"col-md-6 col-md-offset-3 col-xs-12"},[o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-info btn-block",on:{click:function(t){e.interactions.showEmailLogin=!0}}},[o("i",{staticClass:"fa fa-email fa-lg button-icon"}),e._v(" Login com Email\n                     ")])])])]),e._v(" "),e.interactions.showEmailLogin?o("div",{staticClass:"row m-t-20",on:{keydown:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13))return null;e.login(t)}}},[o("div",{staticClass:"col-md-6 col-md-offset-3 col-xs-12"},[o("div",{staticClass:"form-group"},[o("label",[e._v("Email")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Informe seu e-mail"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"col-md-6 col-md-offset-3 col-xs-12"},[o("div",{staticClass:"form-group"},[o("label",[e._v("Senha")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Informe sua senha"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"col-md-6 col-md-offset-3 col-xs-12"},[o("div",{staticClass:"form-group"},[o("button",{staticClass:"btn btn-xl btn-primary",attrs:{disabled:!e.email||!e.password},on:{click:function(t){t.preventDefault(),e.login(t)}}},[e._v("Login")])])])]):e._e(),e._v(" "),o("p",{staticClass:"text-muted text-center"},[e._v("\n             Não possui cadastro? "),o("router-link",{attrs:{to:{name:"landing.auth.signup"}}},[e._v("cadastre-se aqui.")])],1)])]):e._e()],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"row m-b-30"},[o("div",{staticClass:"col-lg-12 text-center"},[o("h4",{staticClass:"text-muted m-t-30"},[e._v("Salve e compartilhe com os amigos seus drinks preferidos.")])])])}]}}});
//# sourceMappingURL=3.66d04fcd32609bef582e.js.map