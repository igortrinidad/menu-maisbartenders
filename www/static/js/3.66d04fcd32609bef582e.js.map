{"version":3,"sources":["webpack:///static/js/3.66d04fcd32609bef582e.js","webpack:///./src/modules/landing/auth/components/login.vue","webpack:///login.vue","webpack:///./src/modules/landing/auth/components/login.vue?c372","webpack:///./src/modules/landing/auth/components/login.vue?eb4e","webpack:///./src/modules/landing/auth/components/login.vue?4d5a"],"names":["webpackJsonp","234","module","exports","__webpack_require__","Component","538","__webpack_exports__","Object","defineProperty","value","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default","n","__WEBPACK_IMPORTED_MODULE_1_vuex__","__WEBPACK_IMPORTED_MODULE_3__components_main_header_vue__","__WEBPACK_IMPORTED_MODULE_3__components_main_header_vue___default","name","components","mainHeader","a","data","interactions","showEmailLogin","email","password","redirect","computed","i","mounted","window","cordova","openFB","init","appId","tokenStore","localStorage","methods","login","that","this","setLoading","is_loading","message","$auth","url","fetchUser","rememberMe","handleRedirect","success","response","authSetToken","access_token","authSetUser","user","successNotify","error","_error","errorNotify","events","getItem","clear","setItem","cookies","facebookLogin","status","statusChangeCallback","alert","scope","FB","getUserInfo","authResponse","accessToken","api","path","params","fields","photo_url","id","role","socialLogin","errorHandler","$http","post","then","getUserDrinkLikes","$router","push","catch","$route","query","redirect_back","get","setUserDrinkLikes","likes","console","log","542","version","sources","names","mappings","file","sourcesContent","sourceRoot","548","content","locals","559","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","ready","staticClass","_m","on","click","$event","keydown","_k","keyCode","directives","rawName","expression","type","placeholder","domProps","input","target","composing","disabled","preventDefault","_e","to","staticRenderFns"],"mappings":"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","file":"static/js/3.66d04fcd32609bef582e.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 234:\n/***/ (function(module, exports, __webpack_require__) {\n\n\n/* styles */\n__webpack_require__(548)\n\nvar Component = __webpack_require__(1)(\n  /* script */\n  __webpack_require__(538),\n  /* template */\n  __webpack_require__(559),\n  /* scopeId */\n  \"data-v-6c525212\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n/***/ }),\n\n/***/ 538:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_vuex__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__models_Event_js__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_main_header_vue__ = __webpack_require__(225);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__components_main_header_vue___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3__components_main_header_vue__);\n\n\n\n\n\n\n\n\nvar Swiper = __webpack_require__(21);\n\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    name: 'login',\n\n    components: {\n        mainHeader: __WEBPACK_IMPORTED_MODULE_3__components_main_header_vue___default.a\n    },\n\n    data: function data() {\n        return {\n            interactions: {\n                showEmailLogin: false\n            },\n            email: null,\n            password: null,\n            redirect: null\n        };\n    },\n\n    computed: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"a\" /* mapGetters */])(['currentUser', 'isLogged'])),\n    mounted: function mounted() {\n\n        if (window.cordova) {\n\n            openFB.init({ appId: '262783620860879', tokenStore: localStorage });\n        }\n    },\n\n    methods: __WEBPACK_IMPORTED_MODULE_0_babel_runtime_helpers_extends___default()({}, __webpack_require__.i(__WEBPACK_IMPORTED_MODULE_1_vuex__[\"c\" /* mapActions */])(['authSetToken', 'authSetUser', 'setLoading', 'setUserDrinkLikes']), {\n        login: function login() {\n            var that = this;\n            that.setLoading({ is_loading: true, message: '' });\n\n            this.$auth.login({\n                url: 'guest/auth/login',\n                fetchUser: true,\n                data: {\n                    email: this.email,\n                    password: this.password\n                },\n                rememberMe: this.rememberMe,\n                redirect: this.handleRedirect(),\n                success: function success(response) {\n                    this.authSetToken(response.data.access_token);\n                    this.authSetUser(response.data.user);\n                    that.setLoading({ is_loading: false, message: '' });\n                    successNotify('', 'Login efetuado com sucesso.');\n                },\n                error: function error(_error) {\n                    that.setLoading({ is_loading: false, message: '' });\n                    errorNotify('Ops!', 'Login ou senha inválidos. Dica: Tente pelo Facebook.');\n\n                    var events = localStorage.getItem('events');\n                    localStorage.clear();\n                    localStorage.setItem('events', events);\n\n                    if (window.cordova) {\n                        window.cookies.clear();\n                    }\n                }\n            });\n        },\n        facebookLogin: function facebookLogin() {\n            var that = this;\n\n            that.setLoading({ is_loading: true, message: '' });\n\n            if (window.cordova) {\n                openFB.login(function (response) {\n                    if (response.status === 'connected') {\n                        that.statusChangeCallback(response);\n                    } else {\n                        that.setLoading({ is_loading: false, message: '' });\n                        alert('Facebook login failed: ' + response.error);\n                        if (window.cordova) {\n                            window.cookies.clear();\n                        }\n                    }\n                }, { scope: 'public_profile,email,publish_actions' });\n            }\n\n            if (!window.cordova) {\n\n                FB.login(function (response) {\n                    that.statusChangeCallback(response);\n                }, { scope: 'public_profile,email,publish_actions' });\n            }\n        },\n        statusChangeCallback: function statusChangeCallback(response) {\n            var that = this;\n\n            if (response.status === 'connected') {\n                that.getUserInfo(response.authResponse.accessToken);\n            } else {\n                errorNotify('', 'É necessário fazer login para continuar.');\n                that.setLoading({ is_loading: false, message: '' });\n            }\n        },\n        getUserInfo: function getUserInfo(accessToken) {\n            var that = this;\n            if (window.cordova) {\n                openFB.api({\n                    path: '/v2.8/me',\n                    params: { \"access_token\": accessToken, \"fields\": \"id,name,first_name,last_name,email\" },\n                    success: function success(response) {\n\n                        response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                        response.access_token = accessToken;\n                        response.role = 'guest';\n\n                        that.socialLogin(response);\n\n                        that.setLoading({ is_loading: false, message: '' });\n                    },\n                    error: that.errorHandler\n                });\n            }\n\n            if (!window.cordova) {\n                FB.api('/me', { fields: 'name,first_name, last_name, email' }, function (response) {\n                    response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                    response.access_token = accessToken;\n                    response.role = 'guest';\n\n                    that.socialLogin(response);\n                });\n            }\n        },\n        socialLogin: function socialLogin(response) {\n            var that = this;\n            localStorage.setItem('provider', 'facebook');\n\n            that.setLoading({ is_loading: true, message: '' });\n\n            that.$http.post('/auth/social', response).then(function (response) {\n\n                that.authSetToken(response.data.access_token);\n                that.authSetUser(response.data.user);\n\n                that.setLoading({ is_loading: false, message: '' });\n\n                successNotify('', 'Login efetuado com sucesso.');\n\n                that.getUserDrinkLikes();\n\n                that.$router.push(that.handleRedirect());\n            }).catch(function (error) {\n                errorNotify('Ops!', 'Erro ao efetuar login.');\n                that.setLoading({ is_loading: false, message: '' });\n\n                var events = localStorage.getItem('events');\n                localStorage.clear();\n                localStorage.setItem('events', events);\n\n                if (window.cordova) {\n                    window.cookies.clear();\n                }\n            });\n        },\n        handleRedirect: function handleRedirect() {\n            var that = this;\n            var redirect_to = void 0;\n\n            if (that.$route.query.redirect_back) {\n                redirect_to = that.$route.query.redirect_back;\n            } else {\n                redirect_to = that.$route.query.redirect;\n            }\n\n            return redirect_to ? redirect_to : '/';\n        },\n        errorHandler: function errorHandler(error) {\n            that.setLoading({ is_loading: false, message: '' });\n            errorNotify('', error.message);\n\n            var events = localStorage.getItem('events');\n            localStorage.clear();\n            localStorage.setItem('events', events);\n\n            if (window.cordova) {\n                window.cookies.clear();\n            }\n        },\n        getUserDrinkLikes: function getUserDrinkLikes() {\n            var that = this;\n\n            that.$http.get('/guest/drinkLikes').then(function (response) {\n\n                that.setUserDrinkLikes(response.data.likes);\n            }).catch(function (error) {\n                console.log(error);\n            });\n        }\n    })\n});\n\n/***/ }),\n\n/***/ 542:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(529)();\n// imports\n\n\n// module\nexports.push([module.i, \".text-selected[data-v-6c525212]{background-color:#fed136;font-size:22px}#contact[data-v-6c525212]{background-color:#f7f7f7}.btn[data-v-6c525212]:active{-webkit-transform:scale(.99);transform:scale(.99)}\", \"\", {\"version\":3,\"sources\":[\"/home/andre/we-planner/menu-maisbartenders/src/modules/landing/auth/components/login.vue\"],\"names\":[],\"mappings\":\"AACA,gCACI,yBAA0B,AAC1B,cAAgB,CACnB,AACD,0BACI,wBAA0B,CAC7B,AACD,6BACI,6BAA+B,AACvB,oBAAuB,CAClC\",\"file\":\"login.vue\",\"sourcesContent\":[\"\\n.text-selected[data-v-6c525212]{\\n    background-color: #FED136;\\n    font-size: 22px;\\n}\\n#contact[data-v-6c525212]{\\n    background-color: #F7F7F7;\\n}\\n.btn[data-v-6c525212]:active{\\n    -webkit-transform: scale(0.99);\\n            transform: scale(0.99);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 548:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(542);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(530)(\"b2a7f3d8\", content, true);\n\n/***/ }),\n\n/***/ 559:\n/***/ (function(module, exports) {\n\nmodule.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('main-header', {\n    attrs: {\n      \"title\": 'Login'\n    }\n  }), _vm._v(\" \"), (_vm.$auth.ready()) ? _c('section', {\n    attrs: {\n      \"id\": \"login\"\n    }\n  }, [_c('div', {\n    staticClass: \"container\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block facebook\",\n    on: {\n      \"click\": function($event) {\n        _vm.facebookLogin()\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-facebook fa-lg button-icon\"\n  }), _vm._v(\" Entrar com Facebook\\n                     \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block\",\n    on: {\n      \"click\": function($event) {\n        _vm.interactions.showEmailLogin = true\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-email fa-lg button-icon\"\n  }), _vm._v(\" Login com Email\\n                     \")])])])]), _vm._v(\" \"), (_vm.interactions.showEmailLogin) ? _c('div', {\n    staticClass: \"row m-t-20\",\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.login($event)\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Email\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.email),\n      expression: \"email\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"email\",\n      \"placeholder\": \"Informe seu e-mail\"\n    },\n    domProps: {\n      \"value\": (_vm.email)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.email = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Senha\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.password),\n      expression: \"password\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"Informe sua senha\"\n    },\n    domProps: {\n      \"value\": (_vm.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.password = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-xl btn-primary\",\n    attrs: {\n      \"disabled\": !_vm.email || !_vm.password\n    },\n    on: {\n      \"click\": function($event) {\n        $event.preventDefault();\n        _vm.login($event)\n      }\n    }\n  }, [_vm._v(\"Login\")])])])]) : _vm._e(), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-muted text-center\"\n  }, [_vm._v(\"\\n             Não possui cadastro? \"), _c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'landing.auth.signup'\n      }\n    }\n  }, [_vm._v(\"cadastre-se aqui.\")])], 1)])]) : _vm._e()], 1)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"row m-b-30\"\n  }, [_c('div', {\n    staticClass: \"col-lg-12 text-center\"\n  }, [_c('h4', {\n    staticClass: \"text-muted m-t-30\"\n  }, [_vm._v(\"Salve e compartilhe com os amigos seus drinks preferidos.\")])])])\n}]}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.66d04fcd32609bef582e.js","\n/* styles */\nrequire(\"!!../../../../../node_modules/extract-text-webpack-plugin/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"id\\\":\\\"data-v-6c525212\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./login.vue\")\n\nvar Component = require(\"!../../../../../node_modules/vue-loader/lib/component-normalizer\")(\n  /* script */\n  require(\"!!babel-loader!../../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"),\n  /* template */\n  require(\"!!../../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6c525212\\\"}!../../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"),\n  /* scopeId */\n  \"data-v-6c525212\",\n  /* cssModules */\n  null\n)\n\nmodule.exports = Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/modules/landing/auth/components/login.vue\n// module id = 234\n// module chunks = 3","<template>\n   <div>\n\n   <main-header :title=\"'Login'\" />\n\n    <section id=\"login\" v-if=\"$auth.ready()\">\n        <div class=\"container\">\n            <div class=\"row m-b-30\">\n                <div class=\"col-lg-12 text-center\">\n                    <h4 class=\"text-muted m-t-30\">Salve e compartilhe com os amigos seus drinks preferidos.</h4>\n                </div>\n            </div>\n\n            <div class=\"row\">\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <button class=\"btn btn-info btn-block facebook\" @click=\"facebookLogin()\">\n                            <i class=\"fa fa-facebook fa-lg button-icon\"></i> Entrar com Facebook\n                        </button>\n                    </div>\n                </div>\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <button class=\"btn btn-info btn-block\" @click=\"interactions.showEmailLogin = true\">\n                            <i class=\"fa fa-email fa-lg button-icon\"></i> Login com Email\n                        </button>\n                    </div>\n                </div>\n            </div>\n\n            <div class=\"row m-t-20\" v-if=\"interactions.showEmailLogin\" @keydown.enter=\"login\">\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <label>Email</label>\n                        <input type=\"email\" class=\"form-control\" v-model=\"email\" placeholder=\"Informe seu e-mail\">\n                    </div>\n                </div>\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <label>Senha</label>\n                        <input class=\"form-control\" type=\"password\" v-model=\"password\" placeholder=\"Informe sua senha\">\n                    </div>\n                </div>\n\n                <div class=\"col-md-6 col-md-offset-3 col-xs-12\">\n                    <div class=\"form-group\">\n                        <button class=\"btn btn-xl btn-primary\" @click.prevent=\"login\" :disabled=\"!email || !password\">Login</button>\n                    </div>\n                </div>\n            </div>\n\n            <p class=\"text-muted text-center\">\n                Não possui cadastro? <router-link :to=\"{name: 'landing.auth.signup'}\">cadastre-se aqui.</router-link>\n            </p>\n\n        </div>\n    </section>\n\n   </div>\n</template>\n\n<script>\n    import { mapGetters, mapActions } from 'vuex'\n    import eventObj from '@/models/Event.js'\n\n    import mainHeader from '@/components/main-header.vue'\n\n    var Swiper = require('swiper')\n\n    export default {\n        name: 'login',\n\n        components: {\n            mainHeader\n        },\n\n        data () {\n            return {\n                interactions: {\n                    showEmailLogin: false,\n                },\n                email: null,\n                password: null,\n                redirect: null\n            }\n        },\n        computed:{\n            // Map the getters from Vuex to this component.\n\n            ...mapGetters(['currentUser', 'isLogged']),\n\n        },\n        mounted(){\n\n            if(window.cordova){\n\n                openFB.init({appId: '262783620860879', tokenStore: localStorage});\n            }\n        },\n        methods: {\n            /**\n             * Map the actions from Vuex to this component.\n             */\n            ...mapActions(['authSetToken', 'authSetUser', 'setLoading', 'setUserDrinkLikes']),\n\n            login () {\n                var that = this\n                that.setLoading({is_loading: true, message: ''})\n\n                this.$auth.login({\n                    url:'guest/auth/login',\n                    fetchUser:true,\n                    data:{\n                        email: this.email,\n                        password: this.password,\n                    },\n                    rememberMe: this.rememberMe,\n                    redirect: this.handleRedirect(),\n                    success (response) {\n                        this.authSetToken(response.data.access_token) // this is a Vuex action\n                        this.authSetUser(response.data.user) // this is a Vuex action\n                        that.setLoading({is_loading: false, message: ''})\n                        successNotify('', 'Login efetuado com sucesso.')\n                    },\n                    error (error) {\n                        that.setLoading({is_loading: false, message: ''})\n                        errorNotify('Ops!', 'Login ou senha inválidos. Dica: Tente pelo Facebook.');\n\n                        var events = localStorage.getItem('events');\n                        localStorage.clear();\n                        localStorage.setItem('events', events);\n\n                        if(window.cordova){\n                            window.cookies.clear();\n                        }\n                    }\n                })\n\n            },\n\n            /*\n            * FACEBOOK Methods\n             */\n            facebookLogin(){\n                let that = this\n\n                that.setLoading({is_loading: true, message: ''})\n\n                if(window.cordova){\n                    openFB.login(\n                        function(response) {\n                            if(response.status === 'connected') {\n                                that.statusChangeCallback(response)\n                            } else {\n                                that.setLoading({is_loading: false, message: ''})\n                                alert('Facebook login failed: ' + response.error);\n                                if(window.cordova){\n                                    window.cookies.clear();\n                                }\n                            }\n                        }, {scope: 'public_profile,email,publish_actions'});\n                }\n\n               if(!window.cordova){\n\n                   FB.login(function(response) {\n                       that.statusChangeCallback(response)\n                   }, {scope: 'public_profile,email,publish_actions'});\n               }\n            },\n\n            statusChangeCallback(response) {\n                let that = this\n\n                if (response.status === 'connected') {\n                    that.getUserInfo(response.authResponse.accessToken);\n                } else {\n                    errorNotify('', 'É necessário fazer login para continuar.')\n                    that.setLoading({is_loading: false, message: ''})\n                }\n            },\n\n            getUserInfo(accessToken) {\n                let that = this\n                if(window.cordova){\n                    openFB.api({\n                        path: '/v2.8/me',\n                        params: { \"access_token\": accessToken, \"fields\":\"id,name,first_name,last_name,email\" },\n                        success: function(response) {\n\n                            response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                            response.access_token = accessToken;\n                            response.role = 'guest';\n\n                            that.socialLogin(response)\n\n                            that.setLoading({is_loading: false, message: ''})\n                        },\n                        error: that.errorHandler\n                    })\n                }\n\n                if(!window.cordova){\n                    FB.api('/me', {fields: 'name,first_name, last_name, email' }, function(response) {\n                        response.photo_url = 'https://graph.facebook.com/' + response.id + '/picture?type=normal';\n                        response.access_token = accessToken;\n                        response.role = 'guest';\n\n                        that.socialLogin(response)\n                    });\n                }\n            },\n\n            socialLogin(response){\n                let that = this\n                localStorage.setItem('provider', 'facebook')\n\n                that.setLoading({is_loading: true, message: ''})\n\n                that.$http.post('/auth/social', response)\n                    .then(function (response) {\n\n                        that.authSetToken(response.data.access_token) // this is a Vuex action\n                        that.authSetUser(response.data.user) // this is a Vuex action\n\n                        that.setLoading({is_loading: false, message: ''})\n\n                        successNotify('', 'Login efetuado com sucesso.')\n\n                        that.getUserDrinkLikes()\n\n                        that.$router.push(that.handleRedirect())\n\n                    })\n                    .catch(function (error) {\n                        errorNotify('Ops!', 'Erro ao efetuar login.')\n                        that.setLoading({is_loading: false, message: ''})\n\n                        var events = localStorage.getItem('events');\n                        localStorage.clear();\n                        localStorage.setItem('events', events);\n\n                        if(window.cordova){\n                            window.cookies.clear();\n                        }\n                    });\n            },\n\n            handleRedirect(){\n                let that = this\n                let redirect_to\n\n                if (that.$route.query.redirect_back) {\n                    redirect_to = that.$route.query.redirect_back\n                } else {\n                    redirect_to = that.$route.query.redirect\n                }\n\n                return redirect_to ? redirect_to : '/'\n            },\n\n            errorHandler(error) {\n                that.setLoading({is_loading: false, message: ''})\n                errorNotify('', error.message);\n\n                var events = localStorage.getItem('events');\n                localStorage.clear();\n                localStorage.setItem('events', events);\n\n                if(window.cordova){\n                    window.cookies.clear();\n                }\n            },\n\n            getUserDrinkLikes(){\n                let that = this\n\n                that.$http.get('/guest/drinkLikes')\n                    .then(function (response) {\n\n                        that.setUserDrinkLikes(response.data.likes)\n\n                    })\n                    .catch(function (error) {\n                        console.log(error)\n                    });\n            }\n        }\n    }\n</script>\n\n<style scoped>\n\n    .text-selected{\n        background-color: #FED136;\n        font-size: 22px;\n    }\n\n    #contact{\n        background-color: #F7F7F7;\n    }\n\n    .btn:active{\n        transform: scale(0.99);\n    }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// login.vue?1400b876","exports = module.exports = require(\"../../../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \".text-selected[data-v-6c525212]{background-color:#fed136;font-size:22px}#contact[data-v-6c525212]{background-color:#f7f7f7}.btn[data-v-6c525212]:active{-webkit-transform:scale(.99);transform:scale(.99)}\", \"\", {\"version\":3,\"sources\":[\"/home/andre/we-planner/menu-maisbartenders/src/modules/landing/auth/components/login.vue\"],\"names\":[],\"mappings\":\"AACA,gCACI,yBAA0B,AAC1B,cAAgB,CACnB,AACD,0BACI,wBAA0B,CAC7B,AACD,6BACI,6BAA+B,AACvB,oBAAuB,CAClC\",\"file\":\"login.vue\",\"sourcesContent\":[\"\\n.text-selected[data-v-6c525212]{\\n    background-color: #FED136;\\n    font-size: 22px;\\n}\\n#contact[data-v-6c525212]{\\n    background-color: #F7F7F7;\\n}\\n.btn[data-v-6c525212]:active{\\n    -webkit-transform: scale(0.99);\\n            transform: scale(0.99);\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-6c525212\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/landing/auth/components/login.vue\n// module id = 542\n// module chunks = 3","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../node_modules/css-loader/index.js?{\\\"minimize\\\":true,\\\"sourceMap\\\":true}!../../../../../node_modules/vue-loader/lib/style-compiler/index.js?{\\\"id\\\":\\\"data-v-6c525212\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../../../node_modules/vue-loader/lib/selector.js?type=styles&index=0!./login.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../../../node_modules/vue-style-loader/lib/addStylesClient.js\")(\"b2a7f3d8\", content, true);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/extract-text-webpack-plugin/loader.js?{\"omit\":1,\"remove\":true}!./~/vue-style-loader!./~/css-loader?{\"minimize\":true,\"sourceMap\":true}!./~/vue-loader/lib/style-compiler?{\"id\":\"data-v-6c525212\",\"scoped\":true,\"hasInlineConfig\":false}!./~/vue-loader/lib/selector.js?type=styles&index=0!./src/modules/landing/auth/components/login.vue\n// module id = 548\n// module chunks = 3","module.exports={render:function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', [_c('main-header', {\n    attrs: {\n      \"title\": 'Login'\n    }\n  }), _vm._v(\" \"), (_vm.$auth.ready()) ? _c('section', {\n    attrs: {\n      \"id\": \"login\"\n    }\n  }, [_c('div', {\n    staticClass: \"container\"\n  }, [_vm._m(0), _vm._v(\" \"), _c('div', {\n    staticClass: \"row\"\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block facebook\",\n    on: {\n      \"click\": function($event) {\n        _vm.facebookLogin()\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-facebook fa-lg button-icon\"\n  }), _vm._v(\" Entrar com Facebook\\n                     \")])])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-info btn-block\",\n    on: {\n      \"click\": function($event) {\n        _vm.interactions.showEmailLogin = true\n      }\n    }\n  }, [_c('i', {\n    staticClass: \"fa fa-email fa-lg button-icon\"\n  }), _vm._v(\" Login com Email\\n                     \")])])])]), _vm._v(\" \"), (_vm.interactions.showEmailLogin) ? _c('div', {\n    staticClass: \"row m-t-20\",\n    on: {\n      \"keydown\": function($event) {\n        if (!('button' in $event) && _vm._k($event.keyCode, \"enter\", 13)) { return null; }\n        _vm.login($event)\n      }\n    }\n  }, [_c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Email\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.email),\n      expression: \"email\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"email\",\n      \"placeholder\": \"Informe seu e-mail\"\n    },\n    domProps: {\n      \"value\": (_vm.email)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.email = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('label', [_vm._v(\"Senha\")]), _vm._v(\" \"), _c('input', {\n    directives: [{\n      name: \"model\",\n      rawName: \"v-model\",\n      value: (_vm.password),\n      expression: \"password\"\n    }],\n    staticClass: \"form-control\",\n    attrs: {\n      \"type\": \"password\",\n      \"placeholder\": \"Informe sua senha\"\n    },\n    domProps: {\n      \"value\": (_vm.password)\n    },\n    on: {\n      \"input\": function($event) {\n        if ($event.target.composing) { return; }\n        _vm.password = $event.target.value\n      }\n    }\n  })])]), _vm._v(\" \"), _c('div', {\n    staticClass: \"col-md-6 col-md-offset-3 col-xs-12\"\n  }, [_c('div', {\n    staticClass: \"form-group\"\n  }, [_c('button', {\n    staticClass: \"btn btn-xl btn-primary\",\n    attrs: {\n      \"disabled\": !_vm.email || !_vm.password\n    },\n    on: {\n      \"click\": function($event) {\n        $event.preventDefault();\n        _vm.login($event)\n      }\n    }\n  }, [_vm._v(\"Login\")])])])]) : _vm._e(), _vm._v(\" \"), _c('p', {\n    staticClass: \"text-muted text-center\"\n  }, [_vm._v(\"\\n             Não possui cadastro? \"), _c('router-link', {\n    attrs: {\n      \"to\": {\n        name: 'landing.auth.signup'\n      }\n    }\n  }, [_vm._v(\"cadastre-se aqui.\")])], 1)])]) : _vm._e()], 1)\n},staticRenderFns: [function (){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;\n  return _c('div', {\n    staticClass: \"row m-b-30\"\n  }, [_c('div', {\n    staticClass: \"col-lg-12 text-center\"\n  }, [_c('h4', {\n    staticClass: \"text-muted m-t-30\"\n  }, [_vm._v(\"Salve e compartilhe com os amigos seus drinks preferidos.\")])])])\n}]}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/vue-loader/lib/template-compiler?{\"id\":\"data-v-6c525212\"}!./~/vue-loader/lib/selector.js?type=template&index=0!./src/modules/landing/auth/components/login.vue\n// module id = 559\n// module chunks = 3"],"sourceRoot":""}